{% extends 'organizer/base.html' %}
{% load i18n %}
{% load static %}

{% block dashboard_title %}{% trans "Submissions" %}{% endblock %}

{% block dashboard_content %}
<div class="container-fluid">
  <div class="row mb-4">
    <div class="col-12">
      <div class="card shadow-sm">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="card-title mb-0"><i class="fas fa-flag me-2"></i>{% trans "Submissions" %}</h5>
          <div>
            <a href="#" class="btn btn-primary btn-sm">
              <i class="fas fa-download me-1"></i> {% trans "Export" %}
            </a>
          </div>
        </div>
        <div class="card-body">
          <div class="mb-3">
            <div class="btn-group" role="group">
              <button type="button" class="btn btn-outline-primary active">{% trans "All" %}</button>
              <button type="button" class="btn btn-outline-success">{% trans "Correct" %}</button>
              <button type="button" class="btn btn-outline-danger">{% trans "Incorrect" %}</button>
            </div>
          </div>
          
          {% if submissions %}
            <div class="table-responsive">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>{% trans "Challenge" %}</th>
                    <th>{% trans "User" %}</th>
                    <th>{% trans "Team" %}</th>
                    <th>{% trans "Submission" %}</th>
                    <th>{% trans "Time" %}</th>
                    <th>{% trans "Status" %}</th>
                    <th>{% trans "IP Address" %}</th>
                  </tr>
                </thead>
                <tbody>
                  {% for submission in submissions %}
                    <tr>
                      <td>
                        <a href="{% url 'organizer:challenge_detail' submission.challenge.id %}">{{ submission.challenge.name }}</a>
                      </td>
                      <td>{{ submission.user.username }}</td>
                      <td>
                        {% if submission.team %}
                          <a href="{% url 'organizer:team_detail' submission.team.id %}">{{ submission.team.name }}</a>
                        {% else %}
                          â€”
                        {% endif %}
                      </td>
                      <td>
                        <code>{{ submission.submission }}</code>
                      </td>
                      <td>{{ submission.submitted_at }}</td>
                      <td>
                        {% if submission.is_correct %}
                          <span class="badge bg-success">{% trans "Correct" %}</span>
                        {% else %}
                          <span class="badge bg-danger">{% trans "Incorrect" %}</span>
                        {% endif %}
                      </td>
                      <td>
                        <small>{{ submission.ip_address }}</small>
                      </td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          {% else %}
            <div class="alert alert-info">
              <i class="fas fa-info-circle me-2"></i>{% trans "No submissions yet." %}
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
